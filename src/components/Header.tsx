import React, { useState, useEffect } from 'react'

import styles from '../styles/Header.module.css'

import { lightTheme, darkTheme } from '../utils/theme'

type Props = {
    title?: string
}

type LampProps = {
    color?: string
}

const Header = ({ title = 'Github Explorer' }: Props) => {
    const [currentTheme, setTheme] = useState("light");

    useEffect(() => {
        const theme = localStorage.getItem('theme') || 'light';
        setTheme(theme)
        applyTheme(theme)
    }, [])

    const changeTheme = () => {
        const nextTheme = currentTheme === "light" ? "dark" : "light";
        setTheme(nextTheme)
        applyTheme(nextTheme)
        localStorage.setItem('theme', nextTheme)
    };

    const applyTheme = (nextTheme: string) => {
        const theme = nextTheme === "dark" ? lightTheme : darkTheme;
        Object.keys(theme).map(key => {
            //@ts-ignore
            const value = theme[key];
            document.documentElement.style.setProperty(key, value);
        });
    };

    return (
        <>
            <meta charSet="utf-8" />
            <meta name="viewport" content="initial-scale=1.0, width=device-width" />
            <title>{title}</title>

            <header className={styles.header}>
                <h1>Github Explorer</h1>
                <p>
                    Criado por <a href="https://github.com/LockDzn" target="_blank">Ryan Souza</a>
                </p>
                <a className={styles.themeButton} onClick={changeTheme}>
                    {/* <div className={styles.ball}></div> */}
                    {currentTheme === "light" ? <Lamp color="#fff" /> : <Lamp color="#000" /> }
                </a>
            </header>
        </>
    )
}

const Lamp = ({ color = 'white' }: LampProps) => (
    <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0)">
            <path d="M14.0627 25H10.9377C10.2085 25 9.37516 24.375 9.37516 23.125V20.9375C9.37516 19.8958 8.85433 18.9583 8.021 18.2292C6.146 16.7708 5.2085 14.6875 5.2085 12.3958C5.31266 8.4375 8.54183 5.3125 12.396 5.20834C14.3752 5.20834 16.2502 5.9375 17.6043 7.29167C18.9585 8.64583 19.7918 10.5208 19.7918 12.5C19.7918 14.6875 18.8543 16.7708 17.0835 18.125C16.146 18.8542 15.6252 20 15.6252 21.0417V23.4375C15.6252 24.2708 14.896 25 14.0627 25V25ZM12.5002 6.25C9.16683 6.25 6.35433 9.0625 6.25016 12.3958C6.25016 14.375 7.0835 16.25 8.646 17.3958C9.79183 18.3333 10.4168 19.5833 10.4168 20.9375V23.125C10.4168 23.3333 10.4168 23.9583 10.9377 23.9583H14.0627C14.3752 23.9583 14.5835 23.75 14.5835 23.4375V21.0417C14.5835 19.6875 15.3127 18.2292 16.4585 17.2917C17.9168 16.1458 18.7502 14.375 18.7502 12.5C18.7502 10.8333 18.1252 9.27083 16.8752 8.02083C15.7293 6.875 14.1668 6.25 12.5002 6.25V6.25Z" fill={color}/>
            <path d="M15.1042 21.875H9.89583C9.58333 21.875 9.375 21.6667 9.375 21.3542C9.375 21.0417 9.58333 20.8333 9.89583 20.8333H15.1042C15.4167 20.8333 15.625 21.0417 15.625 21.3542C15.625 21.6667 15.4167 21.875 15.1042 21.875Z" fill={color}/>
            <path d="M12.4998 3.125C12.1873 3.125 11.979 2.91666 11.979 2.60416V0.520829C11.979 0.208329 12.1873 -3.8147e-06 12.4998 -3.8147e-06C12.8123 -3.8147e-06 13.0207 0.208329 13.0207 0.520829V2.60416C13.0207 2.91666 12.8123 3.125 12.4998 3.125Z" fill={color}/>
            <path d="M19.4792 6.04166C19.375 6.04166 19.1667 6.04166 19.0625 5.9375C18.8542 5.72916 18.8542 5.41666 19.0625 5.20833L20.5208 3.75C20.7292 3.54166 21.0417 3.54166 21.25 3.75C21.4583 3.95833 21.4583 4.27083 21.25 4.47916L19.7917 5.9375C19.7917 5.9375 19.5833 6.04166 19.4792 6.04166V6.04166Z" fill={color}/>
            <path d="M24.4792 13.0208H22.3958C22.0833 13.0208 21.875 12.8125 21.875 12.5C21.875 12.1875 22.0833 11.9792 22.3958 11.9792H24.4792C24.7917 11.9792 25 12.1875 25 12.5C25 12.8125 24.7917 13.0208 24.4792 13.0208Z" fill={color}/>
            <path d="M20.9375 21.4583C20.8333 21.4583 20.625 21.4583 20.5208 21.3542L19.0625 19.8958C18.8542 19.6875 18.8542 19.375 19.0625 19.1667C19.2708 18.9583 19.5833 18.9583 19.7917 19.1667L21.25 20.625C21.4583 20.8333 21.4583 21.1458 21.25 21.3542C21.25 21.4583 21.1458 21.4583 20.9375 21.4583Z" fill={color}/>
            <path d="M4.06266 21.4583C3.9585 21.4583 3.75016 21.4583 3.646 21.3542C3.43766 21.1458 3.43766 20.8333 3.646 20.625L5.10433 19.1667C5.31266 18.9583 5.62516 18.9583 5.8335 19.1667C6.04183 19.375 6.04183 19.6875 5.8335 19.8958L4.37516 21.3542C4.271 21.4583 4.16683 21.4583 4.06266 21.4583V21.4583Z" fill={color}/>
            <path d="M2.60417 13.0208H0.520833C0.208333 13.0208 0 12.8125 0 12.5C0 12.1875 0.208333 11.9792 0.520833 11.9792H2.60417C2.91667 11.9792 3.125 12.1875 3.125 12.5C3.125 12.8125 2.91667 13.0208 2.60417 13.0208Z" fill={color}/>
            <path d="M5.521 6.04166C5.41683 6.04166 5.2085 6.04166 5.10433 5.9375L3.646 4.375C3.43766 4.16666 3.43766 3.85417 3.646 3.64583C3.85433 3.4375 4.16683 3.4375 4.37516 3.64583L5.8335 5.10416C6.04183 5.3125 6.04183 5.625 5.8335 5.83333C5.72933 5.9375 5.62516 6.04166 5.521 6.04166V6.04166Z" fill={color}/>
            <path d="M16.6665 13.0208C16.354 13.0208 16.1457 12.8125 16.1457 12.5C16.1457 10.5208 14.479 8.85417 12.4998 8.85417C12.1873 8.85417 11.979 8.64583 11.979 8.33333C11.979 8.02083 12.1873 7.8125 12.4998 7.8125C15.104 7.8125 17.1873 9.89583 17.1873 12.5C17.1873 12.8125 16.979 13.0208 16.6665 13.0208Z" fill={color}/>
        </g>
        <defs>
            <clipPath id="clip0">
                <rect width="25" height="25" fill={color}/>
            </clipPath>
        </defs>
    </svg>
)

export default Header